# java-convenience-store-precourse
# 편의점 기능 목록

결제시스템

- 사용자가 입력한 상품의 가격과 수량을 기반으로 최종 결제 금액을 계산한다.
    - 총구매액은 상품별 가격과 수량을 곱하여 계산하며, 프로모션 및 멤버십 할인 정책을 반영하여 최종 결제 금액을 산출한다.
- 구매 내역과 산출한 금액 정보를 영수증으로 출력한다.
- 영수증 출력 후 추가 구매를 진행할지 또는 종료할지를 선택할 수 있다.


### 재고 관리

### 할인

#### 프로모션 할인
- 오늘 날짜가 프로모션 기간 내에 포함된 경우에만 할인
- 프로모션은 N개 구매시 1개 무료 증정형태로만 진행
    - 아 무조건 1+1 2+1 3+1 이런식으로만 프로모션 진행 -> 정형화
- 하나의 상품에는 하나의 프로모션만
- 프로모션 혜택은 프로모션 재고 내에서만 적용
- 프로모션 기간 중이라면 프로모션 재고를 우선적으로 차감
    - 프로모션 재고가 부족할 경우에는 일반 재고를 사용한다.
- 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량보다 적게 가져온경우 필요한 수량을 추가로 가져오면 혜택을 받을 수 있음을 안내한다.
- 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제하게 됨을 안내

#### 멤버십 할인

- 멤버십 회원은 프로모션 미적용 금액의 30%를 할인 받는다.
    - 프로모션 미적용금액 -> 프로모션이 적용된 상품은 포함 x
- 프로모션 적용 후 남은 금액에 대해 멤버십 할인을 적용한다.
- 멤버십 할인의 최대 한도는 8천원이다.

### 영수증 출력

- 영수증 항목
    - 구매 상품 내역
    - 증정 상품 내역
    - 금액 정보
        - 총구매액: 구매한 상품의 총 수량과 총 금액
        - 행사할인: 프로모션에 의해 할인된 금액
        - 멤버십할인: 멤버십에 의해 추가로 할인된 금액
        - 내실돈: 최종 결제 금액
- 영수증 보기 좋게 정렬하기


### 입출력 요구 사항

#### 입력

- src/main/resources/products.md과src/main/resources/promotions.md 파일을이용한다.
- 구매할 상품과 수량을 입력 받는다. 상품명, 수량은 하이픈으로, 개별 상품은 대괄호로 묶어 쉼표로 구분
- 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량보다 적게 가져온경우 그 수량만큼 추가 여부를 입력 받는다.
    - Y: 증정 받을 수 있는 상품을 추가
    - N: 증정 받을 수 있는 상품 추가 x
- 프로모션재고가부족하여일부수량을프로모션혜택없이결제해야하는경우, 일부수량에대해정가로결제할지여 부를입력받는다.
  • Y:일부수량에대해정가로결제한다.
  • N: 정가로결제해야하는수량만큼제외한후결제를진행한다.
- 멤버십할인적용여부를입력받는다.
  • Y: 멤버십할인을적용한다.
  • N: 멤버십할인을적용하지않는다.
- 추가구매여부를입력받는다.
  • Y: 재고가업데이트된상품목록을확인후추가로구매를진행한다.
  • N: 구매 를종료한다

### 출력

출력
• 환영인사와함께상품명, 가격, 프로모션이름, 재고를안내한다.만약재고가0개라면재고없음을출력한다.
• 프로모션적용이가능한상품에대해고객이해당수량만큼가져오지않았을경우, 혜택에대한안내메시지를출력한
다.
현재{상품명}은(는) 1개를무료로더받을수있습니다. 추가하시겠습니까? (V/N)
- 프로모션재고가부족하여일부수량을프로모션혜택없이결제해야하는경우, 일부수량에대해정가로결제할지여 부에대한안내메시지를출력한다.
  현재{상품명}{수량}개는프로모션할인이적용되지않습니다. 그래도구매하시겠습니까? (Y/N)



## 기능 목록

- 1 [x]시작메시지 출력
    - 안녕하세요. W편의점입니다.
- 2 [] 재고 상품 출력
    - 현재 보유하고있는 상품입니다.
    - 고객이 구매하면 차감하여 다음 보여주기
    - src/main/resources/products.md과src/main/resources/promotions.md 파일을이용
    - 3 [] 구매하실 상품과 수량 입력 받기
        - 입력 메시지
            - 구매하실상품명과수량을입력해주세요. (예: [사이다-2], [감자칩-1])
        - 포맷 : [콜라-10],[사이다-3]
        - 예외
            - 포맷에 맞지 않는 경우
                - [ERROR] 올바르지않은형식으로입력했습니다. 다시입력해 주세
                  요.
            - 재고에 없는 상품일 경우
                - [ERROR] 존재하지않는상품입니다. 다시입력해 주세요.
            - 구매 수량이 재고 수량을 초과한 경우
                -  [ERROR] 재고수량을초과하여구매할수없습니다. 다시입력해주세요.
            - 기타 잘못된 입력
                - [ERROR] 잘못된입력입니다. 다시입력해주세요.
- 4 [] 프로모션 적용하기
    - 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량만큼 가져오지 않았을 경우 안내메시지
        - 현재{상품명}은(는) 1개를무료로더받을수있습니다. 추가하시겠습니까? (V/N)
    - 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야하는 경우 일부 수량에 대해 정가로 결제할지 여부
        - 현재{상품명}{수량}개는프로모션할인이적용되지않습니다. 그래도구매하시겠습니까? (Y/N)
- 5 [] 멤버십 적용 여부 묻기
- 6 [] 영수증 출력
- 7 [] 다른 상품 구매 여부 묻기



### 생각해보기

이거 정보가 계속반영되어야 한다.  
주문 객체를 주면서 수정하게 해야할듯
그래야 나중에 행사할인, 멤버십 할인 을 각각 구분해서 내실돈을 판단할 수 잇어
그리고 증정도 따로 저장해야함


- 파일 읽어서 재고 객체
    - 모든 영수증 까지 출력 즉 구매가 끝나면 재고에 반영  없으면 없음으로
    - 다음 구매 진행하면 재고가 반영되어서 다시시도해도 데이터 초기화 되면 안된당

- 할인 종료
    - 프로모션 할인
    - 멤버십 할인
    -


출력할 때 필요한 데이터
구매한 상품명/ 수량/ 금액
증정한 상품명/ 수량

총구매액
행사할인
멤버십할인
내실돈

Inventory -> 재고관리
Order -> 사용자 주문관리
List<Item> items

Item
- 상품명
- 프로모션 Promotion

Promotion
탄산
MD
반짝
